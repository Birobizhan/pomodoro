name: CI

on:
  push:
    branches: ['main']
  pull_request:
    branches: ['main']

jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4 # <-- Добавьте эту строку
    - name: Install Dependencies
      run:
          |
        python -m pip install --upgrade pip
        pip install poetry
        poetry install --no-root
    - name: Black
      run: poetry run black app
  unit-test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4 # <-- И эту строку
      - name: Install Dependencies
        run:
            |
          python -m pip install --upgrade pip
          pip install poetry
          poetry install
      - name: Run Unit Tests
        run: poetry run pytest tests/unit
